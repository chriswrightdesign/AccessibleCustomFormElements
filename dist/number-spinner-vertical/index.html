<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>Custom forms - Number spinner vertical</title>
		<script>
		  (function(d) {
		    var config = {
		      kitId: 'tmv0kmr',
		      scriptTimeout: 3000
		    },
		    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
		  })(document);
		</script>

		<link href="../style/main.min.css" rel="stylesheet" />
        <link href="../style/spinner-vertical.min.css" rel="stylesheet" />
		<link href="../style/prism.min.css" rel="stylesheet" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" href="img/favicon.png">
	</head>
	<body>
		<div class="container">

			<h2>Number spinner Vertical</h2>

			<form id="number-spinner-vertical" class="t-white">
				<fieldset class="spinner-vertical">
					<label for="spinner-input-vertical" class="spinner-vertical-label">How many</label>

					<button data-type="add" class="btn-vertical-spinner btn-vertical-spinner-top" title="Add 1" aria-controls="spinner-input-vertical">+</button>

					<input type="number" class="vertical-spinner-input js-spinner-input-vertical" id="spinner-input-vertical" value="1" step="1"  max="30" min="0" pattern="[0-9]*" role="alert" aria-live="assertlive" />

					<button data-type="subtract" class="btn-vertical-spinner btn-vertical-spinner-bottom" title="Subtract 1" aria-controls="spinner-input-vertical">-</button>
				</fieldset>
			</form>

			<h2>Implementing this component</h2>

			<h3>The Markup</h3>
			<pre class="codeblock">
				<code class="language-markup">
&lt;form id="number-spinner-vertical" class="t-white">
	&lt;fieldset class="spinner-vertical">
		&lt;label for="spinner-input-vertical" class="spinner-vertical-label">How many&lt;/label>
		&lt;button data-type="add" class="btn-vertical-spinner btn-vertical-spinner-top" title="Add 1" aria-controls="spinner-input-vertical">+&lt;/button>
		&lt;input type="number" class="vertical-spinner-input js-spinner-input-vertical" id="spinner-input-vertical" value="1" step="1"  max="30" min="0" pattern="[0-9]*" role="alert" aria-live="assertlive" />
		&lt;button data-type="subtract" class="btn-vertical-spinner btn-vertical-spinner-bottom" title="Subtract 1" aria-controls="spinner-input-vertical">-&lt;/button>
	&lt;/fieldset>
&lt;/form>
				</code>
			</pre>
			<h3>The CSS: Theming</h3>
			<pre class="codeblock">
				<code class="language-css">
.t-white .btn-vertical-spinner {
    background: #222;
    color: #fff;
}
.t-white .btn-vertical-spinner:hover,
.t-white .btn-vertical-spinner:focus,
.t-white .btn-vertical-spinner:active {
	background: #555;
}
.t-white .vertical-spinner-input {
    background:#eee;
}
				</code>
			</pre>
			<h3>The CSS: Reset</h3>
			<pre class="codeblock">
				<code class="language-css">
/* Aggressive reset to remove the initial spinner */
input[type="number"] {
	-moz-appearance: textfield;
}
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance:none;
  margin: 0;
}
input[type="number"]:hover::-webkit-inner-spin-button,
input[type="number"]:hover::-webkit-outer-spin-button {
 -moz-appearance: none;
  -webkit-appearance: none;
  appearance:none;
  margin:0;
}

				</code>
			</pre>
			<h3>The CSS: Component</h3>
			<pre class="codeblock">
				<code class="language-css">
.spinner-vertical {
	max-width:5em;
}
.spinner-vertical-label {
    display:block;
    text-align:center;
    width:100%;
}
.vertical-spinner-input {
	border-radius:0;
    background: none;
    border: none;
    padding:1.5em 1em 1.5em 1em;
    text-align:center;
    font-size:1em;
    width:100%;
}
.vertical-spinner-input:hover,
.vertical-spinner-input:focus,
.vertical-spinner-input:active {
	font-size:1em;
}
.btn-vertical-spinner {
    cursor:pointer;
	text-align:center;
	padding:2em 1em;
	width:100%;
	text-decoration:none;
	display: block;
	transition: background 0.4s ease;
}
.btn-vertical-spinner-top {
	border-top-left-radius: 5px;
	border-top-right-radius: 5px;
}
.btn-vertical-spinner-bottom {
	border-bottom-left-radius: 5px;
	border-bottom-right-radius: 5px;
}
				</code>
			</pre>
			<h3>The Javascript</h3>
			<pre class="codeblock">
				<code class="language-javascript">
  //gets the input by element Id, gets min, max, and step from the markup. Gets the subtract and add buttons either by optional classnames, or by the next or last element sibling.
var NumberSpinner = function(elemId, subtractClassName, addClassName) {
  'use strict';
  var spinnerInput = document.getElementById(elemId);
  var btnSubtract = document.querySelector(addClassName) || spinnerInput.previousElementSibling;
  var btnAdd = document.querySelector(subtractClassName) || spinnerInput.nextElementSibling;
  var minLimit, maxLimit, step;

  function init(){
    minLimit = makeNumber(getAttribute(spinnerInput, 'min')) || 0,
    maxLimit = makeNumber(getAttribute(spinnerInput, 'max')) || false,
    step = makeNumber(getAttribute(spinnerInput, 'step') || '1');

    btnSubtract.addEventListener('click', changeSpinner, false);
    btnAdd.addEventListener('click', changeSpinner, false);
    btnSubtract.addEventListener('keyup', keySpinner, false);
    btnAdd.addEventListener('keyup', keySpinner, false);
    if(supportsTouch()) {
      btnSubtract.addEventListener('touchend', removeClickDelay, false);
      btnAdd.addEventListener('touchend', removeClickDelay, false);
    }
    if(supportsPointer()) {
      btnSubtract.addEventListener('pointerup', removeClickDelay, false);
      btnAdd.addEventListener('pointerup', removeClickDelay, false);
    }
  }
  function removeClickDelay(e) {
    e.preventDefault();
    e.target.click();
  }
  function makeNumber(inputString){
    return parseInt(inputString, 10);
  }
  function update(direction){
    var num = makeNumber(spinnerInput.value);
    if(direction === 'add'){
      spinnerInput.value = ((num + step) &lt;= maxLimit) ? (num + step) : spinnerInput.value;
    } else if(direction === 'subtract') {
      spinnerInput.value = ((num - step) >= minLimit) ? (num - step) : spinnerInput.value;
    }
  }
  function getAttribute(el, attr){
    var hasGetAttr = (el.getAttribute &amp;&amp; el.getAttribute(attr)) || null;
    if(!hasGetAttr) {
      var attrs = el.attributes;
      for(var i = 0, len = attrs.length; i &lt; len; i++){
        if(attrs[i].nodeName === attr) {
          hasGetAttr = attrs[i].nodeValue;
        }
      }
    }
    return hasGetAttr;
  }
  /* Touch and Pointer support */
  function supportsTouch(){
    return ('ontouchstart' in window);
  }
  function supportsPointer(){
    return ('pointerdown' in window);
  }
  /* Keyboard support */
  function keySpinner(e){
    switch(e.keyCode){
      case 40:
      case 37: // Down, Left
        update('subtract');
        btnSubtract.focus();
        break;
      case 38:
      case 39: // Top, Right
        update('add');
        btnAdd.focus();
        break;
    }
  }
  function changeSpinner(e) {
    e.preventDefault();
    var increment = getAttribute(e.target, 'data-type');
    update(increment);
  }
  init();
};
				</code>
			</pre>

			<h2>About the component</h2>
			<p>TBD.</p>

			<h3>Screen Readers</h3>
			<h4>Apple Voiceover</h4>
			<p>TBD.</p>
			<h4>JAWS</h4>
			<p>TBD.</p>
			<h4>NVDA</h4>
			<p>TBD.</p>

			<h3>Keyboard control</h3>
			<p>TBD.</p>

			<h3>High Contrast</h3>
			<p>TBD.</p>

			<h3>Inputs</h3>
			<p>TBD.</p>

			<h3>Cross browser notes</h3>
			<p>TBD.</p>

			<h3>Cross device notes</h3>
			<p>TBD.</p>


		</div>
\
		<script src="../scripts/prism.js"></script>
		 <script src="../scripts/numberspinner.min.js"></script>
		<script>
			NumberSpinner('spinner-input-vertical', 'reverse');
		</script>

	</body>
</html>